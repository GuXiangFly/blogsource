---
title: 操作系统 
date: 2018-11-1 13:22:54
tags: [MongoDB,java]


---

操作系统
======


## 内存管理

![image-20200719231512738](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20200719231512738.png)

![image-20200719231739044](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20200719231739044.png)



###  1.内存空间的扩充

#### 覆盖技术

​	- ![image-20200719233055618](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20200719233055618.png)



![image-20200719233302954](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20200719233302954.png)





#### 交换技术

交换技术核心思想：

> 内存空间紧张时，系统将内存中某些进程暂时换出外存，把外村中某些已经具备运行条件的进程换入内存（进程在内存和磁盘间动态调度）

交换技术在内存空间紧张的时候，内存被换出的进程会进入挂起状态（挂起态，suspend）

挂起态可以分为 就绪挂起，阻塞挂起 两种状态





###  2.内存连续分配管理

- 分区大小相等：用于利用一台计算机去控制多个相同对象的场合。
- 分区大小不等：划分为含有多个较小的分区、适量的中等分区及少量的大分区。
- 动态分区分配





用户态和内核态







## 用户态和内核态

在计算机系统中，通常运行两类程序：系统内核程序和应用程序。

- 正在执行内核程序，说明此时是操作系统正在控制CPU。
- 正在执行应用程序，说明此时是应用程序正在控制CPU。





这个系统所做的，就是将操作系统

![image-20201201002355544](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20201201002355544.png)



核心态和用户态的切换，本质上就是操作系统与普通应用程序对CPU控制权的切换。

使用较高级别的特权指令 类似IO读取写入操作/ 内存删除操作  这些操作，就需要通过操作系统执行，因此普通应用程序想进行这些操作必要将。





![image-20201201002850829](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20201201002850829.png)

系统

![image-20211015135404201](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20211015135404201.png)

用户态切换，本质是应用程序和操作系统对CPU控制权的一个交接/切换





#### 什么情况下回进行用户态转到内核态

什么情况下会进行系统切换：

- 用户态程序调用操作系统的服务
- 发生了一次中断，比如说IO读取完成了，会向CPU发出一个中断信号，由于中断处理需要操作系统完成，这时候也会发生程序从用户态切换
- 程序内发生异常



#### 程序的启动

假设我们现在有一个QQ.exe 需要执行，  QQ.exe 会被加载进入内存

假设QQ.exe 在内存中的起始位置是 0X0003 ~0X20000    

0X0003是main方法， CPU通过控制总线，假设读取到一个add指令

> 一个程序的执行，首先吧可执行文件读取到内存中，找到起始的（main）地址，逐步读出指令和数据，进行计算并且

什么是进程：

- 一个程序进入内存，那么我们就称之为进程。

- 由于同一个进程内，有多个任务并发执行的需求（比如一边计算，一边接收网络数据，一边刷新界面）

  能不能多进程解决这个问题？ 可以，但是毛病多，最严重的毛病是，我们可以很轻易的破坏别的进程。

- 进程和线程的区别：

  - 进程：进程其实是一个静态的概念；程序进入内存，分配对应的资源，内存空间，进程进入内存就会产生一个主线程。
    - 进程是资源分配的基本单位
    - 进程之间资源是独立的（否则可能出现）
  - 线程：是可执行的计算单元
    - 线程是执行/调度的基本单位



#### 线程的切换

线程切换需要先保存上下文到cache中。

什么是线程撕裂者： 四核八线程 ， 三核六线程 什么意思?

- 意思是一个CPU核心里面，有一个**ALU（ 算术逻辑单元 (Arithmetic Logic Unit, *ALU*)）**，有两个 register 和  program counter （程序计数器）  这样线程的上下文切换就不需要额外缓存到cache中去了。 能极大减小线程上下文切换的消耗。

![image-20211017011600157](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20211017011600157.png)







#### 进程隔离

单进程只能使用我自己的虚拟空间









操作系统



### 进程与线程与协程



- 进程：进程其实是一个静态的概念；程序进入内存，分配对应的资源，内存空间，进程进入内存就会产生一个主线程。

  - 进程是资源分配的基本单位

  - 进程之间资源是独立的（否则可能出现）

- 线程：是可执行的计算单元

  - 线程是执行/调度的基本单位
  - 线程的创建会 在用户态和内核态中创建一个1:1 的
- 协程：我们为了提升操作系统切换的能力， 



![image-20211026123805231](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20211026123805231.png)





![image-20211026123947290](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20211026123947290.png)





![image-20211026124051183](https://gitee.com/guxiangfly/blogimage/raw/master/img/image-20211026124051183.png)





## select   pull  epull 的区别

- 


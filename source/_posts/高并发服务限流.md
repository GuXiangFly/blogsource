---
title: 高并发服务限流
date: 2020-6-1 13:22:54
tags: [MongoDB,java]

---

# 高并发服务限流

- 服务降级
  - 在高并发服务下，防止用户一直等待，使用服务降级方式（直接返回一个友好提示给客户端，调用fallback）
- 服务熔断
  - 熔断机制目的是wield保护服务，在高并发情况下，如果达到一定的极限（可以自己设置阈值）如果超出了阈值，直接拒绝访问或者使用服务降级。
- 服务隔离
  - 雪崩效应产生原因：默认情况下只有一个线程池维护所有的服务接口， 如果大量的请求访问同一个接口，达到Tomcat线程池默认的极限，会导致其他接口无法访问。
  - 解决方式： 线程池方式和信号量 
    - 线程池方式：相当于每个接口都有独立的线程池。线程池互不影响
- 服务限流
  - 











#### 服务限流

- 滑动窗口

- 令牌桶

  - 令牌桶分为两个动作
    - 动作1- 固定速率往桶中存入令牌
    - 动作2- 客户端如果想访问请求，先从桶中获取token  

  <img src="http://guxiangflyimagebucket.oss-cn-beijing.aliyuncs.com/img/image-20200807163847377.png" alt="image-20200807163847377" style="zoom:50%;" />

  - 如果请求拿不到

